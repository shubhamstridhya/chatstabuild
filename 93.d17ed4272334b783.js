"use strict";(self.webpackChunkChatsta=self.webpackChunkChatsta||[]).push([[93],{2093:(I,p,r)=>{r.r(p),r.d(p,{AuthModule:()=>T});var c=r(9808),m=r(1083),l=r(3075),o=r(5e3),g=r(6518),h=r(520);let f=(()=>{class t{constructor(n,e){this.http=n,this.auth=e,this.requestHeader=new h.WM({"No-auth":"True"})}adminlogin(n){return this.http.post("api/v1/userLogin",n,{headers:this.requestHeader})}roleMatch(n){let e=!1;return this.auth.getRoles()===n&&(e=!0),e}loggedIn(){return!!localStorage.getItem("token")}forgot(n){return this.http.post("",n)}}return t.\u0275fac=function(n){return new(n||t)(o.LFG(h.eN),o.LFG(g.e))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=r(7322),v=r(7531);const b=function(t){return{"is-invalid":t}};let w=(()=>{class t{constructor(n,e,i,a){this.router=n,this.builder=e,this.auth=i,this.loginservice=a}ngOnInit(){this.buildloginform()}buildloginform(){this.Adminaccount=this.builder.group({email:new l.NI})}sendmail(){console.log(this.Adminaccount.value),this.loginservice.forgot(this.Adminaccount.value).subscribe(n=>{console.log(n)}),this.router.navigate(["/auth/login"])}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(m.F0),o.Y36(l.qu),o.Y36(g.e),o.Y36(f))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-forgot-password"]],decls:7,vars:5,consts:[[1,"my-form",3,"formGroup","ngSubmit"],[1,"full-width"],["matInput","","placeholder","Email","name","email","formControlName","email",3,"ngClass"],[3,"disabled"]],template:function(n,e){if(1&n&&(o.TgZ(0,"form",0),o.NdJ("ngSubmit",function(){return e.sendmail()}),o.TgZ(1,"mat-form-field",1)(2,"mat-label"),o._uU(3,"Email"),o.qZA(),o._UZ(4,"input",2),o.qZA(),o.TgZ(5,"button",3),o._uU(6," send mail"),o.qZA()()),2&n){let i;o.Q6J("formGroup",e.Adminaccount),o.xp6(4),o.Q6J("ngClass",o.VKq(3,b,(null==(i=e.Adminaccount.get("email"))?null:i.touched)&&(null==(i=e.Adminaccount.get("email"))?null:i.invalid))),o.xp6(1),o.Q6J("disabled",e.Adminaccount.invalid)}},directives:[l._Y,l.JL,l.sg,u.KE,u.hX,v.Nt,l.Fj,l.JJ,l.u,c.mk],styles:[""]}),t})();var A=r(4594),d=r(9224),J=r(7423);const F=function(t){return{"is-invalid":t}},y=[{path:"login",component:(()=>{class t{constructor(n,e,i,a){this.router=n,this.builder=e,this.auth=i,this.loginservice=a}ngOnInit(){this.buildloginform()}buildloginform(){this.loginForm=this.builder.group({email:new l.NI,password:new l.NI})}login(){console.log(this.loginForm.value),this.loginservice.adminlogin(this.loginForm.value).subscribe(n=>{console.log(n),this.auth.setRoles(n.user.isAdmin),this.auth.setToken(n.accessToken),this.router.navigate(!0===n.user.isAdmin?["admin/dashboard"]:["admin/profile"]),window.alert("login successful")},n=>{window.alert("login failed"),console.log(n)})}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(m.F0),o.Y36(l.qu),o.Y36(g.e),o.Y36(f))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-login"]],decls:20,vars:8,consts:[[1,"my-card"],[1,"my-form",3,"formGroup"],[1,"full-width"],["matInput","","placeholder","Email","name","email","formControlName","email",3,"ngClass"],["matInput","","placeholder","Password","name","password","formControlName","password",3,"ngClass"],["href","auth/forgot"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(n,e){if(1&n&&(o.TgZ(0,"mat-toolbar")(1,"span"),o._uU(2,"LOGIN"),o.qZA()(),o.TgZ(3,"mat-card",0)(4,"mat-card-content")(5,"form",1)(6,"mat-form-field",2)(7,"mat-label"),o._uU(8,"Email"),o.qZA(),o._UZ(9,"input",3),o.qZA(),o._UZ(10,"br"),o.TgZ(11,"mat-form-field",2)(12,"mat-label"),o._uU(13,"Password"),o.qZA(),o._UZ(14,"input",4),o.qZA(),o.TgZ(15,"a",5),o._uU(16,"Forgot password?"),o.qZA()()(),o.TgZ(17,"mat-card-actions")(18,"button",6),o.NdJ("click",function(){return e.login()}),o._uU(19,"LOGIN"),o.qZA()()()),2&n){let i,a;o.xp6(5),o.Q6J("formGroup",e.loginForm),o.xp6(4),o.Q6J("ngClass",o.VKq(4,F,(null==(i=e.loginForm.get("email"))?null:i.touched)&&(null==(i=e.loginForm.get("email"))?null:i.invalid))),o.xp6(5),o.Q6J("ngClass",o.VKq(6,F,(null==(a=e.loginForm.get("password"))?null:a.touched)&&(null==(a=e.loginForm.get("password"))?null:a.invalid))),o.xp6(4),o.Q6J("disabled",e.loginForm.invalid)}},directives:[A.Ye,d.a8,d.dn,l._Y,l.JL,l.sg,u.KE,u.hX,v.Nt,l.Fj,l.JJ,l.u,c.mk,d.hq,J.lW],styles:[""]}),t})()},{path:"forgot",component:w}];let L=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[m.Bz.forChild(y)],m.Bz]}),t})();var N=r(1394);let T=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[c.ez,L,A.g0,d.QW,u.lN,h.JF,N.O,l.UX]]}),t})()}}]);